/* Sgvizler JavaScript SPARQL result set visualizer, version 0.5.2
 * (c) 2011--2013 Martin G. Skj√¶veland - MIT license
 * http://dev.data2000.no/sgvizler/
 *-----------------------------------------------------------------*/(function(e){"use strict";var t={go:function(){this.loadLibs(),google.load("visualization","1.0",{packages:["annotatedtimeline","corechart","gauge","geomap","geochart","imagesparkline","map","orgchart","table","motionchart","treemap"]}),google.setOnLoadCallback(function(){t.charts.loadCharts(),t.drawFormQuery(),t.drawContainerQueries()})},loadLibs:function(){var e,n=["//cdnjs.cloudflare.com/ajax/libs/d3/2.10.0/d3.v2.min.js","http://www.data2000.no/sgvizler/lib/raphael-dracula.min.js"];t.ui.isElement(t.ui.id.script)&&(this.option.homefolder=$("#"+t.ui.id.script).attr("src").replace(/sgvizler\.js$/,""));for(e=0;e<n.length;e+=1)$.ajax(n[e],{dataType:"script",async:!1});$("head").append('<link rel="stylesheet" href="'+this.option.homefolder+'sgvizler.chart.css" type="text/css" />')},drawFormQuery:function(){var e=new t.query(t.ui.id.chartCon),n=t.ui.getUrlParams();$.extend(e,t.option.query,{query:n.query,endpoint:n.endpoint,chart:n.chart}),t.ui.isElement(e.container)&&e.query&&($.extend(e.chartOptions,{width:n.width,height:n.height}),e.draw()),t.ui.displayUI(e)},drawContainerQueries:function(){$("["+this.ui.attr.prefix+"query]").each(function(){var e=new t.query;$.extend(e,t.option.query,t.ui.getQueryOptionAttr(this)),$.extend(e.chartOptions,t.ui.getChartOptionAttr(this)),e.draw()})},option:{},chart:{},charts:{},parser:{},ui:{}};jQuery.ajaxSetup({accepts:{xml:"application/sparql-results+xml",json:"application/sparql-results+json"}}),t.option={home:window.location.href.replace(window.location.search,""),homefolder:"",namespace:{rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#"},query:{},chart:{}},t.ui={id:{script:"sgvzlr_script",chartCon:"sgvzlr_gchart",queryForm:"sgvzlr_formQuery",queryTxt:"sgvzlr_cQuery",formQuery:"sgvzlr_strQuery",formEndpoint:"sgvzlr_strEndpoint",formWidth:"sgvzlr_strWidth",formHeight:"sgvzlr_strHeight",formChart:"sgvzlr_optChart",prefixCon:"sgvzlr_cPrefix",messageCon:"sgvzlr_cMessage"},attr:{prefix:"data-sgvizler-",prefixChart:"data-sgvizler-chart-options",valueAssign:"=",valueSplit:"|"},params:["query","endpoint","chart","width","height"],displayUI:function(e){this.displayPrefixes(),this.displayChartTypesMenu(),this.displayUserInput(e)},displayPrefixes:function(){this.setElementText(this.id.prefixCon,t.query.prototype.getPrefixes())},displayUserInput:function(e){this.setElementValue(this.id.queryTxt,e.query),this.setElementValue(this.id.formEndpoint,e.endpoint),this.setElementValue(this.id.formChart,e.chart),this.setElementValue(this.id.formWidth,e.chartOptions.width),this.setElementValue(this.id.formHeight,e.chartOptions.height)},displayChartTypesMenu:function(){var e,n;if(this.isElement(this.id.formChart)){e=t.charts.all;for(n=0;n<e.length;n+=1)$("#"+this.id.formChart).append($("<option/>").val(e[n].id).html(e[n].id))}},displayFeedback:function(e,t){var n,r=e.container;e.container===this.id.chartCon&&this.isElement(this.id.messageCon)&&(r=this.id.messageCon);if(e.loglevel===0)n="";else if(e.loglevel===1){if(t==="LOADING")n="Loading...";else if(t==="ERROR_ENDPOINT"||t==="ERROR_UNKNOWN")n="Error."}else t==="LOADING"?n="Sending query...":t==="ERROR_ENDPOINT"?n="Error querying endpoint. Possible errors:"+this.html.ul(this.html.a(e.endpoint,"SPARQL endpoint")+" down? "+this.html.a(e.endpoint+e.endpoint_query_url+e.encodedQuery,"Check if query runs at the endpoint")+".","Malformed SPARQL query? "+this.html.a(e.validator_query_url+e.encodedQuery,"Check if it validates")+".","CORS supported and enabled?","Is your browser support ed?","Hmm.. it might be a bug! Please file a report to Sgvizler's development site."):t==="ERROR_UNKNOWN"?n="Unknown error.":t==="NO_RESULTS"?n="Query returned no results.":t==="DRAWING"&&(n="Received "+e.noRows+" rows. Drawing chart...<br/>"+this.html.a(e.endpoint+e.endpoint_query_url+e.encodedQuery,"View query results","target='_blank'")+" (in new window).");this.setElementHTML(r,this.html.tag("p",n))},setElementValue:function(e,t){this.isElement(e)&&$("#"+e).val(t)},setElementText:function(e,t){this.isElement(e)&&$("#"+e).text(t)},setElementHTML:function(e,t){this.isElement(e)&&$("#"+e).html(t)},isElement:function(e){return $("#"+e).length>0},getQueryOptionAttr:function(e){var t,n={container:$(e).attr("id")},r=e.attributes;for(t=0;t<r.length;t+=1)r[t].name.lastIndexOf(this.attr.prefix,0)===0&&(n[r[t].name.substring(this.attr.prefix.length)]=r[t].value);return n},getChartOptionAttr:function(e){var n,r,i,s,o,u,a={},f=$(e).attr(t.ui.attr.prefixChart);if(typeof f!="undefined"){r=f.split(this.attr.valueSplit);for(n=0;n<r.length;n+=1){i=r[n].split(this.attr.valueAssign),s=i[0].split("."),o=a;for(u=0;u<s.length-1;u+=1)typeof o[s[u]]=="undefined"&&(o[s[u]]={}),o=o[s[u]];o[s[u]]=i[1]}}return a.width=/(\d+)/.exec($(e).css("width"))[1],a.height=/(\d+)/.exec($(e).css("height"))[1],a},getUrlParams:function(){var e={},t,n=/([^&=]+)=?([^&]*)/g,r=function(e){return decodeURIComponent(e.replace(/\+/g," "))},i=window.location.search.substring(1);while(t=n.exec(i))t[2].length>0&&this.params.indexOf(t[1])!==-1&&(e[r(t[1])]=r(t[2]));return e},resetPage:function(){document.location=t.option.home},submitQuery:function(){$("#"+this.id.formQuery).val($("#"+this.id.queryTxt).val()),$("#"+this.id.queryForm).submit()},html:{a:function(e,t,n){typeof n=="undefined"&&(n="");if(typeof e!="undefined"&&typeof t!="undefined")return"<a "+n+" href='"+e+"'>"+t+"</a>"},ul:function(){var e,t;if(arguments.length){t="<ul>";for(e=0;e<arguments.length;e+=1)t+="<li>"+arguments[e]+"</li>";return t+"</ul>"}},tag:function(e,t){return"<"+e+">"+t+"</"+e+">"}}},t.parser={defaultGDatatype:"string",countRowsSparqlXML:function(e){return $(e).find("sparql").find("results").find("result").length},countRowsSparqlJSON:function(e){if(typeof e.results.bindings!="undefined")return e.results.bindings.length},SparqlXML2GoogleJSON:function(e){var n,r,i=[],s=[],o=[],u=$(e).find("sparql").find("results").find("result");return n=0,$(e).find("sparql").find("head").find("variable").each(function(){var e=null,r=null,s=$(this).attr("name"),a=null,f=$(u).find('binding[name="'+s+'"]');f.length&&(a=$(f).first().children().first()[0],e=a.nodeName,r=$(a).attr("datatype")),o[n]=t.parser.getGoogleJsonDatatype(e,r),i[n]={id:s,label:s,type:o[n]},n+=1}),r=0,$(u).each(function(){var e,u,a,f,l,h=[];for(n=0;n<i.length;n+=1)e=null,u=$(this).find('binding[name="'+i[n].id+'"]'),u.length&&typeof $(u).first().children().first()!="undefined"&&$(u).first().children().first().firstChild!==null&&(a=$(u).first().children().first()[0],f=a.nodeName,l=$(a).first().text(),e=t.parser.getGoogleJsonValue(l,o[n],f)),h[n]={v:e};s[r]={c:h},r+=1}),{cols:i,rows:s}},SparqlJSON2GoogleJSON:function(e){var t,n,r,i,s,o,u,a=[],f=[],l=[],c=e.head.vars,h=e.results.bindings;for(t=0;t<c.length;t+=1){n=0,o=null,u=null;while(typeof h[n][c[t]]=="undefined"&&n+1<h.length)n+=1;typeof h[n][c[t]]!="undefined"&&(o=h[n][c[t]].type,u=h[n][c[t]].datatype),l[t]=this.getGoogleJsonDatatype(o,u),a[t]={id:c[t],label:c[t],type:l[t]}}for(n=0;n<h.length;n+=1){r=h[n],i=[];for(t=0;t<c.length;t+=1)s=null,typeof r[c[t]]!="undefined"&&typeof r[c[t]].value!="undefined"&&(s=this.getGoogleJsonValue(r[c[t]].value,l[t],r[c[t]].type)),i[t]={v:s};f[n]={c:i}}return{cols:a,rows:f}},getGoogleJsonValue:function(e,t,n){var r;return t==="number"?r=Number(e):t==="date"?r=new Date(e.substr(0,4),e.substr(5,2),e.substr(8,2)):t==="datetime"?r=new Date(e.substr(0,4),e.substr(5,2),e.substr(8,2),e.substr(11,2),e.substr(14,2),e.substr(17,2)):t==="timeofday"?r=[e.substr(0,2),e.substr(3,2),e.substr(6,2)]:(n==="uri"&&(r=this.prefixify(e)),r=e),r},getGoogleJsonDatatype:function(e,n){var r=this.defaultGDatatype,i=t.option.namespace.xsd;return typeof e!="undefined"&&(e==="typed-literal"||e==="literal")&&(n===i+"float"||n===i+"double"||n===i+"decimal"||n===i+"int"||n===i+"long"||n===i+"integer"?r="number":n===i+"boolean"?r="boolean":n===i+"date"?r="date":n===i+"dateTime"?r="datetime":n===i+"time"&&(r="timeofday")),r},prefixify:function(e){var n;for(n in t.option.namespace)if(t.option.namespace.hasOwnProperty(n)&&e.lastIndexOf(t.option.namespace[n],0)===0)return e.replace(t.option.namespace[n],n+":");return e},unprefixify:function(e){var n;for(n in t.option.namespace)if(t.option.namespace.hasOwnProperty(n)&&e.lastIndexOf(n+":",0)===0)return e.replace(n+":",t.option.namespace[n]);return e}},t.query=function(e){this.container=e,this.query="SELECT ?class (count(?instance) AS ?noOfInstances)\nWHERE{ ?instance a ?class }\nGROUP BY ?class\nORDER BY ?class",this.endpoint="http://sws.ifi.uio.no/sparql/world",this.endpoint_output="json",this.endpoint_query_url="?output=text&amp;query=",this.validator_query_url="http://www.sparql.org/query-validator?languageSyntax=SPARQL&amp;outputFormat=sparql&amp;linenumbers=true&amp;query=",this.chart="gLineChart",this.loglevel=2,this.chartOptions={width:"800",height:"400",chartArea:{left:"5%",top:"5%",width:"75%",height:"80%"},gGeoMap:{dataMode:"markers"},gMap:{dataMode:"markers"},sMap:{dataMode:"markers",showTip:!0,useMapTypeControl:!0},gSparkline:{showAxisLines:!1}}},t.query.prototype.draw=function(){var e=this,n=t.charts.getChart(this.container,this.chart);this.setChartSpecificOptions(),this.insertFrom(),this.runQuery(function(t){n.draw(new google.visualization.DataTable(e.processQueryResults(t)),e.chartOptions)})},t.query.prototype.runQuery=function(e){var n,r,i=this.endpoint_output;t.ui.displayFeedback(this,"LOADING"),this.encodedQuery=encodeURIComponent(this.getPrefixes()+this.query),this.endpoint_output!=="jsonp"&&$.browser.msie&&window.XDomainRequest?(n=new XDomainRequest,r=this.endpoint+"?query="+this.encodedQuery+"&output="+this.endpoint_output,n.open("GET",r),n.onload=function(){var t;i==="xml"?t=$.parseXML(n.responseText):t=$.parseJSON(n.responseText),e(t)},n.send()):$.get(this.endpoint,{query:this.getPrefixes()+this.query,output:this.endpoint_output==="jsonp"?"json":this.endpoint_output},function(t){e(t)},this.endpoint_output).error(function(){t.ui.displayFeedback(this,"ERROR_ENDPOINT")})},t.query.prototype.processQueryResults=function(e){this.setResultRowCount(e);if(this.noRows===null)t.ui.displayFeedback(this,"ERROR_UNKNOWN");else{if(this.noRows!==0)return t.ui.displayFeedback(this,"DRAWING"),this.getGoogleJSON(e);t.ui.displayFeedback(this,"NO_RESULTS")}},t.query.prototype.setResultRowCount=function(e){this.endpoint_output==="xml"?this.noRows=t.parser.countRowsSparqlXML(e):this.noRows=t.parser.countRowsSparqlJSON(e)},t.query.prototype.getGoogleJSON=function(e){return this.endpoint_output==="xml"?e=t.parser.SparqlXML2GoogleJSON(e):e=t.parser.SparqlJSON2GoogleJSON(e),e},t.query.prototype.insertFrom=function(){if(typeof this.rdf!="undefined"){var e,n=this.rdf.split(t.ui.attr.valueSplit),r="";for(e=0;e<n.length;e+=1)r+="FROM <"+n[e]+">\n";this.query=this.query.replace(/(WHERE)?(\s)*\{/,"\n"+r+"WHERE {")}},t.query.prototype.getPrefixes=function(){var e,n="";for(e in t.option.namespace)t.option.namespace.hasOwnProperty(e)&&(n+="PREFIX "+e+": <"+t.option.namespace[e]+">\n");return n},t.query.prototype.setChartSpecificOptions=function(){var e,t;for(e in this.chartOptions)if(this.chartOptions.hasOwnProperty(e)&&e===this.chart)for(t in this.chartOptions[e])this.chartOptions[e].hasOwnProperty(t)&&(this.chartOptions[t]=this.chartOptions[e][t])},t.charts={all:[],loadCharts:function(){var e=[{id:"gLineChart",func:google.visualization.LineChart},{id:"gAreaChart",func:google.visualization.AreaChart},{id:"gSteppedAreaChart",func:google.visualization.SteppedAreaChart},{id:"gPieChart",func:google.visualization.PieChart},{id:"gBubbleChart",func:google.visualization.BubbleChart},{id:"gColumnChart",func:google.visualization.ColumnChart},{id:"gBarChart",func:google.visualization.BarChart},{id:"gSparkline",func:google.visualization.ImageSparkLine},{id:"gScatterChart",func:google.visualization.ScatterChart},{id:"gCandlestickChart",func:google.visualization.CandlestickChart},{id:"gGauge",func:google.visualization.Gauge},{id:"gOrgChart",func:google.visualization.OrgChart},{id:"gTreeMap",func:google.visualization.TreeMap},{id:"gTimeline",func:google.visualization.AnnotatedTimeLine},{id:"gMotionChart",func:google.visualization.MotionChart},{id:"gGeoChart",func:google.visualization.GeoChart},{id:"gGeoMap",func:google.visualization.GeoMap},{id:"gMap",func:google.visualization.Map},{id:"gTable",func:google.visualization.Table}],n;$.merge(this.all,e);for(n in t.chart)t.chart.hasOwnProperty(n)&&this.register(t.chart[n].prototype.id,t.chart[n])},register:function(e,t){this.all.push({id:e,func:t})},getChart:function(e,t){var n,r=document.getElementById(e);for(n=0;n<this.all.length;n+=1)if(t===this.all[n].id)return new this.all[n].func(r)}},t.chart.dForceGraph=function(e){this.container=e},t.chart.dForceGraph.prototype={id:"dForceGraph",draw:function(e,t){var n=e.getNumberOfColumns(),r=e.getNumberOfRows(),i=$.extend({maxnodesize:15,minnodesize:2},t),s=d3.scale.category20(),o=t.width,u=t.height,a=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},f=[],l=[],c={},h={},p=0,d,v,m,g,y,b,w,E,S,x,T,N;for(d=0;d<r;d+=1)v=e.getValue(d,0),m=e.getValue(d,1),v!==null&&$.inArray(v,f)===-1&&(f.push(v),h[v]=n>2?Math.sqrt(e.getValue(d,2)):0,c[v]=n>3?e.getValue(d,3):0,h[v]>p&&(p=h[v])),m!==null&&$.inArray(m,f)===-1&&f.push(m),v!==null&&m!==null&&l.push({source:$.inArray(v,f),target:$.inArray(m,f)});p===0&&(p=1),g=i.maxnodesize/p;for(y=0;y<f.length;y+=1)b=typeof c[f[y]]!="undefined"?c[f[y]]:1,w=a(h[f[y]])?i.minnodesize+h[f[y]]*g:i.minnodesize,f[y]={name:f[y],color:b,size:w};$(this.container).empty(),E=d3.select(this.container).append("svg:svg").attr("width",o).attr("height",u).attr("pointer-events","all").append("svg:g").call(d3.behavior.zoom().on("zoom",function(){E.attr("transform","translate("+d3.event.translate+")"+" scale("+d3.event.scale+")")})).append("svg:g"),E.append("svg:rect").attr("width",o).attr("height",u).attr("fill","white"),S=d3.layout.force().gravity(.05).distance(100).charge(-100).nodes(f).links(l).size([o,u]).start(),x=E.selectAll("line.link").data(l).enter().append("svg:line").attr("class","link").attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}),T=E.selectAll("g.node").data(f).enter().append("svg:g").attr("class","node").call(S.drag),T.append("svg:circle").style("fill",function(e){return s(e.color)}).attr("class","node").attr("r",function(e){return e.size}),T.append("svg:title").text(function(e){return e.name}),T.append("svg:text").attr("class","nodetext").attr("dx",12).attr("dy",".35em").text(function(e){return e.name}),N=0,S.on("tick",function(){N+=1,N>250&&(S.stop(),S.charge(0).linkStrength(0).linkDistance(0).gravity(0).start()),x.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}),T.attr("transform",function(e){return"translate("+e.x+","+e.y+")"})})}},t.chart.rdGraph=function(e){this.container=e},t.chart.rdGraph.prototype={id:"rdGraph",draw:function(e,n){var r,i=e.getNumberOfRows(),s,o,u=e.getNumberOfColumns(),a=$.extend({noderadius:.5,nodefontsize:"10px",nodeheight:20,nodestrokewidth:"1px",directed:!1,nodecornerradius:"1px",nodepadding:7,nodecolor:"green",edgestroke:"blue",edgefill:"blue",edgestrokewidth:1,edgefontsize:"10px",edgeseparator:", "},n),f=new Dracula.Graph,l,c,h,p,d,v,m=function(e,n){return function(r,i){return r.set().push(r.rect(i.point[0],i.point[1],i.label.length*a.nodepadding,a.nodeheight).attr({fill:e,"stroke-width":a.nodestrokewidth,r:a.nodecornerradius})).push(r.text(i.point[0]+i.label.length*a.nodepadding/2,i.point[1]+a.nodeheight/2,i.label).attr({"font-size":a.nodefontsize}).click(function(){n&&window.open(t.parser.unprefixify(n))}))}},g=function(e,t,n){f.addNode(e,{label:t,render:m(n,e)})},y={},b=[];for(r=0;r<i;r+=1)p=e.getValue(r,0),d=e.getValue(r,2),p&&g(p,e.getValue(r,1)||p,u>5?e.getValue(r,5):a.nodecolor),d&&g(d,e.getValue(r,3)||d,u>6?e.getValue(r,6):a.nodecolor),p&&d&&(v="",y[p+d]!==undefined?v=y[p+d].label:b.push(p+d),u>4&&e.getValue(r,4).length>0&&(v.length>0&&(v+=a.edgeseparator),v+=e.getValue(r,4)),y[p+d]={source:p,target:d,label:v});for(s=0,o=b.length;s<o;s+=1)h=y[b[s]],f.addEdge(h.source,h.target,{stroke:a.edgestroke,directed:a.directed,fill:a.edgefill,label:h.label,width:a.edgestrokewidth,fontsize:a.edgefontsize});l=new Dracula.Graph.Layout.Spring(f),l.layout(),$(this.container).empty(),c=new Dracula.Graph.Renderer.Raphael(this.container,f,a.width,a.height,{noderadius:a.nodeheight*a.noderadius}),c.draw()}},t.chart.DefList=function(e){this.container=e},t.chart.DefList.prototype={id:"sDefList",draw:function(e,t){var n,r,i,s,o=e.getNumberOfColumns(),u=e.getNumberOfRows(),a=$.extend({cellSep:" ",termPrefix:"",termPostfix:":",definitionPrefix:"",definitionPostfix:""},t),f=$(document.createElement("dl"));for(n=0;n<u;n+=1){i=a.termPrefix+e.getValue(n,0)+a.termPostfix,f.append($(document.createElement("dt")).html(i)),s=a.definitionPrefix;for(r=1;r<o;r+=1)s+=e.getValue(n,r),r+1!==o&&(s+=a.cellSep);s+=a.definitionPostfix,f.append($(document.createElement("dd")).html(s))}$(this.container).empty(),$(this.container).append(f)}},t.chart.List=function(e){this.container=e},t.chart.List.prototype={id:"sList",draw:function(e,t){var n=e.getNumberOfColumns(),r=e.getNumberOfRows(),i=$.extend({list:"ul",cellSep:", ",rowPrefix:"",rowPostfix:""},t),s=$(document.createElement(i.list)),o,u,a;for(o=0;o<r;o+=1){a=i.rowPrefix;for(u=0;u<n;u+=1)a+=e.getValue(o,u),u+1!==n&&(a+=i.cellSep);a+=i.rowPostfix,s.append($(document.createElement("li")).html(a))}$(this.container).empty(),$(this.container).append(s)}},t.chart.sMap=function(e){this.container=e},t.chart.sMap.prototype={id:"sMap",draw:function(e,n){var r,i,s,o=e.getNumberOfColumns(),u,a;if(o>3){i=e.clone();for(a=o-1;a>2;a-=1)i.removeColumn(a);for(u=0;u<e.getNumberOfRows();u+=1)s="<div class='sgvizler sgvizler-sMap'>",s+="<h1>"+e.getValue(u,2)+"</h1>",5<o&&e.getValue(u,5)!==null&&(s+="<div class='img'><img src='"+e.getValue(u,5)+"'/></div>"),3<o&&e.getValue(u,3)!==null&&(s+="<p class='text'>"+e.getValue(u,3)+"</p>"),4<o&&e.getValue(u,4)!==null&&(s+="<p class='link'><a href='"+t.parser.unprefixify(e.getValue(u,4))+"'>"+e.getValue(u,4)+"</a></p>"),s+="</div>",i.setCell(u,2,s)}else i=e;r=new google.visualization.Map(this.container),r.draw(i,n)}},t.chart.Table=function(e){this.container=e},t.chart.Table.prototype={id:"sTable",draw:function(e,t){var n=e.getNumberOfColumns(),r=e.getNumberOfRows(),i=$.extend({headings:!0},t),s=$(document.createElement("table")),o,u,a;if(i.headings){a=$(document.createElement("tr"));for(o=0;o<n;o+=1)a.append($(document.createElement("th")).html(e.getColumnLabel(o)));s.append(a)}for(u=0;u<r;u+=1){a=$(document.createElement("tr"));for(o=0;o<n;o+=1)a.append($(document.createElement("td")).html(e.getValue(u,o)));s.append(a)}$(this.container).empty(),$(this.container).append(s)}},t.chart.Text=function(e){this.container=e},t.chart.Text.prototype={id:"sText",draw:function(e,t){var n=e.getNumberOfColumns(),r=e.getNumberOfRows(),i=$.extend({cellSep:", ",cellPrefix:"",cellPostfix:"",rowPrefix:"<p>",rowPostfix:"</p>",resultsPrefix:"<div>",resultsPostfix:"</div>"},t),s=i.resultsPrefix,o,u,a;for(o=0;o<r;o+=1){a=i.rowPrefix;for(u=0;u<n;u+=1)a+=i.cellPrefix+e.getValue(o,u)+i.cellPostfix,u+1!==n&&(a+=i.cellSep);s+=a+i.rowPostfix}s+=i.resultsPostfix,$(this.container).empty(),$(this.container).html(s)}},e.sgvizler=t})(window);